<div class="alert alert-danger" role="alert" *ngIf="errorMsg">
    sorry,somthing went wrong
</div>
<div class="container" *ngIf="!isLoading">
    <div class="row" justify-content-center>
        
        <div class="col-md-6">
            <div class="row">
                <div class="col-md-12" style="text-align: center;">
                    <h3>Edit Profile</h3>

                    <div>
                        {{user.username}}
                    </div>
                </div>
                </div>
                <div class="col-md-12" style="text-align: center;">
                <form enctype="multipart/form-data" #pic="ngForm" *ngIf="!isLoadingPic">
                    <label>
                        <div class="profile-pic" style="background-image: url('{{user.profilePicture}}')">
                            <span class="glyphicon glyphicon-camera"></span>
                            <span (click)="openVerticallyCentered(content)">Change Image</span>
                        </div>
                    </label>
                    <input type="File" name="ImageFile" id="fileToUpload" (change)="onSubmitPic($event)">


                    <ng-template #content let-modal>
                        <div class="modal-header text-center" style="margin:  auto;">
                            <h4 style="text-align: center;">Change Profile Photo</h4>
                            <!-- <button type="button" class="btn-close" aria-label="Close" (click)="modal.dismiss('Cross click')"></button> -->
                        </div>

                        <ul class="list-group text-center fw-bolder">
                            <li class="list-group-item text-primary" (click)="uploadPic()" style="cursor: pointer;">
                                Upload
                                Photo
                            </li>
                            <li class="list-group-item text-danger" (click)="removePic()" *ngIf="isHavingPic"
                                style="cursor: pointer;">Remove Current Photo</li>
                            <li class="list-group-item text-muted" style="cursor: pointer;"
                                (click)="modal.close('Close click')">
                                Cancel</li>

                        </ul>
                    </ng-template>
                </form>
                <div *ngIf="isLoadingPic">
                    <app-pizza-spinner></app-pizza-spinner>
                </div>
            </div>


            <div class="col-md-12 "  >

            <div *ngIf="user">
                <form class="col-md-8 col-sm-10" (ngSubmit)="onSubmit(dataForm)" #dataForm="ngForm" style="margin: 0 auto;">
                    <div class="form-group">
                        <label for="fullName">Full Name</label>
                        <input type="text" class="form-control" id="fullName" name="fullName"
                            [(ngModel)]="user.fullName" #fullName="ngModel" required>
                        <span class="help-block" *ngIf="fullName.invalid && fullName.touched" style="color: red;">Full
                            name
                            is required</span>
                    </div>
                    <div class="form-group">
                        <label for="bio">Bio</label>
                        <textarea class="form-control" id="bio" name="description" [(ngModel)]="user.description"
                            maxlength="150"></textarea>
                    </div>

                    <button [disabled]="!dataForm.valid" type="submit" class="btn btn-primary">Submit</button>
                </form>
            </div>
            </div>
        </div>

    </div>